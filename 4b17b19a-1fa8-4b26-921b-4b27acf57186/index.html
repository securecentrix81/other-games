<!DOCTYPE html>
<html>
  <head>
    <title>Other Games</title>
    <style>
      sup.newtag {
        font-size:small;
      }
      .newtag{
        color:red;
        font-weight:400
      }
      a:visited{
        color:#00f
      }
      pre{
        max-height:25vh;
        overflow-y:scroll;
        width:calc(100% - 100px);
        white-space:pre-wrap;
        border:1px solid #000;
        margin-left:50px;
        padding:10px
      }
      span.red-note{
        color:#e00;
        background-color:#fcc;
      }
      span.blue-note{
        color:#00c;
        background-color:#ccf;
      }
      span.green-note{
        color:#0c0;
        background-color:#cfc;
      }
      span.note-detail{
        border-radius:5px;
        padding:2px 5px;
        margin:0 5px;
        font-weight: normal;
        font-size: 0.8em;
      }
      summary{
        cursor:pointer;
        font-size:1.2em;
        margin:10px
      }
      h2 {
        line-height: 30px;
      }

      /* Info button styles */
      .info-container {
        display: inline-block;
        position: relative;
        vertical-align: middle;
      }

      .info-button {
        font-family: Arial, sans-serif;
        display: inline-block;
        width: 20px;
        height: 20px;
        line-height: 15px;
        text-align: center;
        background-color: #4a90e2;
        color: white;
        border-radius: 50%;
        font-size: 14px;
        font-weight: bold;
        cursor: help;
        margin-left: 8px;
      }

      .info-details {
        display: none;
        position: absolute;
        left: 30px;
        top: 50%;
        transform: translateY(-50%);
        background-color: white;
        border: 2px solid #4a90e2;
        border-radius: 8px;
        padding: 10px;
        white-space: nowrap;
        z-index: 1000;
      }

      .info-container:hover .info-details {
        display: block;
      }
      .link-disabled {
        font-style: italic;
        color: #999;
      }
    </style>
  </head>
  <body>
    <h1 style="text-align: center">Clicker Game Generator</h1>
    <h2>
      <a href="https://securecentrix81.github.io/clicker/create/claude-opus-4-5-thinking-32k.html">Clicker Game Generator</a>
      <span class="info-container">
        <span class="info-button">i</span>
        <span class="info-details">
          <span class="note-detail red-note">AI Generated</span>
          <span class="note-detail blue-note">Made by <b>Claude Opus 4.5 Thinking 32k</b></span>
        </span>
      </span>
    </h2>
    <h2>
      <a href="https://forms.gle/TFFuZx9kinzg2w218">Add a Clicker Game Generator</a>
    </h2>
    <h2>
      <a href="https://docs.google.com/spreadsheets/d/1Owfb8jmqDZySHWsDiyPBXH0ul0H6hp6ND605baGhmtY/view">View Clicker Game Generators</a>
    </h2>
    <script>
      let toRemove = document.querySelectorAll("[remove]")
      for (let i of toRemove) {
        if (parseInt(i.getAttribute("remove")) < Date.now()) i.remove()
      }

      let infoBtn = document.querySelectorAll(".info-button")
      for (let i of infoBtn) {
        i.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="#ffffff" viewBox="0 0 16 16"><path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0"></path></svg>`
      }
    </script>
    <script>
      let moneyTarget = 38422818570606.64;
      let currentMoney = 0;
      let growthRatePerMs = 0;
      let baseDebt = 0;
      let baseTime = 0;
      const apiUrl = 'https://api.fiscaldata.treasury.gov/services/api/fiscal_service/v2/accounting/od/debt_to_penny?sort=-record_date&page[size]=2';

      // 1. Create a reusable formatter
      const formatter = new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2,
        maximumFractionDigits: 2
      });

      async function fetchDebt() {
        try {
          const response = await fetch(apiUrl);
          const data = await response.json();

          // Get the two most recent records
          const latest = data.data[0];
          const previous = data.data[1];

          const d1 = parseFloat(latest.tot_pub_debt_out_amt);
          const d2 = parseFloat(previous.tot_pub_debt_out_amt);

          const t1 = new Date(latest.record_date).getTime();
          const t2 = new Date(previous.record_date).getTime();

          // Calculate growth per millisecond between these two dates
          growthRatePerMs = (d1 - d2) / (t1 - t2);

          baseDebt = d1;
          baseTime = t1;

          moneyTarget = d1;
        } catch (error) {
          console.error('Error fetching debt data:', error);
        }
      }

      function simulateLiveTarget() {
        if (baseTime > 0) {
          const msElapsedSinceRecord = Date.now() - baseTime;
          // Target moves forward based on the historical rate of change
          moneyTarget = baseDebt + (growthRatePerMs * msElapsedSinceRecord);
        }
      }

      function updateDebt() {
        simulateLiveTarget()
        // 3. Smooth interpolation (Ease-out effect)
        // Adjust 0.05 to a lower number (e.g., 0.01) for slower transitions
        currentMoney += (moneyTarget - currentMoney) * 0.05;

        // 4. Use the formatter for consistent $ and 2 decimal points
        const formatted = formatter.format(currentMoney);

        for (let i of document.querySelectorAll('.us-debt')) {
          i.innerText = formatted;
        }

        requestAnimationFrame(updateDebt);
      }

      // Run the loop and fetch
      updateDebt();
      fetchDebt();
      setInterval(fetchDebt, 1000 * 30);
    </script>
  </body>
</html>
