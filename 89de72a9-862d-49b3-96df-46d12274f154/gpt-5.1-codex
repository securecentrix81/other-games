<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Secure Centrix81 | Frontier Stand-Off Prototype</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&family=Montserrat:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      color-scheme: dark;
      --clay: #cf9564;
      --sage: #a3b18a;
      --sky: #7fc8ff;
      --embers: #ff6b35;
      --charcoal: #0e1217;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Montserrat', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(circle at top, rgba(255, 215, 171, 0.08), transparent 55%), #050608;
      color: #f8fafc;
      text-rendering: optimizeLegibility;
      min-height: 100vh;
    }
    h1, h2, h3 {
      font-family: 'Cinzel', 'Times New Roman', serif;
      letter-spacing: 0.03em;
    }
    #gameCanvas {
      width: 100%;
      height: auto;
      border-radius: 1rem;
      border: 1px solid rgba(255, 255, 255, 0.12);
      background: linear-gradient(180deg, #1d0f0f 0%, #100707 70%);
      box-shadow: 0 25px 60px rgba(0, 0, 0, 0.45);
    }
    .hud-chip {
      backdrop-filter: blur(16px);
      border: 1px solid rgba(255, 255, 255, 0.12);
      border-radius: 0.85rem;
      padding: 0.85rem 1.25rem;
      background: rgba(8, 12, 18, 0.7);
    }
    .log-list li::before {
      content: '➤';
      margin-right: 0.5rem;
      color: var(--embers);
    }
    #statusBanner {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      pointer-events: none;
      font-family: 'Cinzel', serif;
      font-size: clamp(1.5rem, 3vw, 2.6rem);
      text-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
    }
    #statusBanner span {
      background: rgba(6, 8, 12, 0.65);
      padding: 0.5rem 1.5rem;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    #endCard {
      position: absolute;
      inset: auto 1.5rem 1.5rem auto;
      background: rgba(8, 12, 18, 0.9);
      border-radius: 1rem;
      padding: 1rem 1.5rem;
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      min-width: 220px;
      display: none;
    }
    .pulse {
      animation: pulse 1.6s infinite;
    }
    @keyframes pulse {
      0% { opacity: 0.45; }
      50% { opacity: 1; }
      100% { opacity: 0.45; }
    }
    button:focus-visible {
      outline: 3px solid var(--sky);
      outline-offset: 3px;
    }
  </style>
</head>
<body>
  <div class="min-h-screen py-10 px-4">
    <div class="max-w-6xl mx-auto space-y-8">
      <header class="text-center space-y-4">
        <p class="uppercase text-xs tracking-[0.5em] text-amber-400">Secure Centrix81 Prototype Deployment</p>
        <h1 class="text-4xl lg:text-5xl font-bold">Frontier Stand-Off: Winter of 1899</h1>
        <p class="text-gray-300 max-w-3xl mx-auto">Command an outlaw during the final days of the American frontier. Survive relentless waves, protect your camp, and carry out rapid-fire missions inspired by the world of Red Dead Redemption 2.</p>
      </header>

      <div class="grid gap-6 lg:grid-cols-[2.1fr_1fr] items-start">
        <section class="space-y-4">
          <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
            <div class="hud-chip space-y-1">
              <p class="text-xs uppercase tracking-wide text-amber-300">Mission</p>
              <p id="waveDisplay" class="text-2xl font-semibold">Wave 0</p>
            </div>
            <div class="hud-chip space-y-1">
              <p class="text-xs uppercase tracking-wide text-red-300">Health</p>
              <p class="text-2xl font-semibold"><span id="healthDisplay">100</span>%</p>
            </div>
            <div class="hud-chip space-y-1">
              <p class="text-xs uppercase tracking-wide text-sky-300">Ammo</p>
              <p class="text-2xl font-semibold"><span id="ammoDisplay">6</span>/6</p>
            </div>
            <div class="hud-chip space-y-1">
              <p class="text-xs uppercase tracking-wide text-green-300">Honor</p>
              <p class="text-2xl font-semibold" id="scoreDisplay">0</p>
            </div>
          </div>

          <div class="bg-white/5 border border-white/10 rounded-2xl p-5 shadow-2xl">
            <p class="text-sm uppercase tracking-[0.4em] text-amber-300">Current Objective</p>
            <p id="missionText" class="text-xl font-semibold mt-2 text-white">Hold tight, gang...</p>
          </div>

          <div class="relative">
            <canvas id="gameCanvas" width="960" height="540"></canvas>
            <div id="statusBanner"></div>
            <div id="endCard">
              <p class="text-xs uppercase tracking-[0.4em] text-slate-300" id="endTitle">Status</p>
              <p id="endMessage" class="text-lg font-semibold mt-1"></p>
              <p id="endStats" class="text-sm text-gray-300 mt-2"></p>
              <button id="restartBtn" class="mt-3 bg-amber-500/80 hover:bg-amber-400 text-black font-semibold px-4 py-2 rounded-full w-full transition">Ride Again</button>
            </div>
          </div>

          <div class="bg-white/5 border border-white/10 rounded-2xl p-5">
            <div class="flex items-center gap-2 text-sm uppercase tracking-[0.4em] text-amber-300 mb-3">
              <span class="h-2 w-2 rounded-full bg-amber-300"></span>
              <span>Mission Feed</span>
            </div>
            <ul id="logList" class="log-list space-y-2 text-sm text-gray-200 max-h-40 overflow-auto pr-2"></ul>
          </div>
        </section>

        <aside class="space-y-5">
          <div class="bg-white/5 border border-white/10 rounded-2xl p-5 space-y-4">
            <h2 class="text-2xl font-semibold">Field Controls</h2>
            <ul class="space-y-2 text-sm text-gray-200">
              <li><span class="font-semibold text-white">W / A / S / D</span> — Move the outlaw</li>
              <li><span class="font-semibold text-white">Mouse</span> — Aim your revolver</li>
              <li><span class="font-semibold text-white">Left Click / Space</span> — Fire</li>
              <li><span class="font-semibold text-white">R</span> — Reload cylinder</li>
              <li><span class="font-semibold text-white">Shift</span> — Short sprint burst</li>
            </ul>
            <p class="text-xs text-gray-400">Tip: Shots slow enemies. Keep moving to avoid flanks.</p>
          </div>

          <div class="bg-white/5 border border-white/10 rounded-2xl p-5 space-y-3">
            <h2 class="text-2xl font-semibold">Mission Chain</h2>
            <ol class="list-decimal list-inside space-y-1 text-sm text-gray-200">
              <li>Secure the wagon trail near Valentine.</li>
              <li>Hold the camp perimeter against Pinkertons.</li>
              <li>Extract the informant from Caliga Hall.</li>
              <li>Hijack the payroll run south of Annesburg.</li>
              <li>Defend Roanoke Ridge cliffside.</li>
              <li>Finale: Guard the escape boats by Sisika shore.</li>
            </ol>
          </div>

          <div class="bg-white/5 border border-white/10 rounded-2xl p-5 space-y-3">
            <h2 class="text-2xl font-semibold">Prototype Notes</h2>
            <p class="text-sm text-gray-300">Dynamic waves, handcrafted mission briefs, and cinematic overlays emulate the intensity of a sprawling frontier campaign inside a single-file deployment.</p>
          </div>
        </aside>
      </div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const waveDisplay = document.getElementById('waveDisplay');
    const healthDisplay = document.getElementById('healthDisplay');
    const ammoDisplay = document.getElementById('ammoDisplay');
    const scoreDisplay = document.getElementById('scoreDisplay');
    const missionText = document.getElementById('missionText');
    const logList = document.getElementById('logList');
    const statusBanner = document.getElementById('statusBanner');
    const endCard = document.getElementById('endCard');
    const endTitle = document.getElementById('endTitle');
    const endMessage = document.getElementById('endMessage');
    const endStats = document.getElementById('endStats');
    const restartBtn = document.getElementById('restartBtn');

    const missions = [
      'Secure the wagon trail outside Valentine.',
      'Reinforce the camp against Pinkerton scouts.',
      'Extract the informant hidden in Caliga Hall.',
      'Intercept the payroll convoy near Annesburg.',
      'Hold the Roanoke Ridge lookout cliffs.',
      'Guard the Sisika escape boats at dawn.'
    ];

    const player = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      radius: 16,
      speed: 2.8,
      sprintBoost: 1.4,
      angle: 0,
      health: 100,
      friction: 0.9,
      vx: 0,
      vy: 0
    };

    const state = {
      wave: 0,
      score: 0,
      ammo: 6,
      maxAmmo: 6,
      reloading: false,
      bullets: [],
      enemies: [],
      particles: [],
      keys: {},
      aim: { x: player.x, y: player.y },
      status: 'intro',
      intermission: false,
      nextWaveTimer: 0,
      lastShot: 0
    };

    function addLog(message) {
      const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
      const item = document.createElement('li');
      item.className = 'flex text-gray-200';
      item.innerHTML = `<span class="text-gray-500 pr-2">[${time}]</span> <span>${message}</span>`;
      logList.prepend(item);
      while (logList.children.length > 6) {
        logList.removeChild(logList.lastChild);
      }
    }

    function updateHUD() {
      waveDisplay.textContent = `Wave ${state.wave}`;
      healthDisplay.textContent = Math.max(0, Math.round(player.health));
      ammoDisplay.textContent = `${state.ammo}`;
      scoreDisplay.textContent = state.score.toString();
    }

    function setMissionText(text) {
      missionText.textContent = text;
    }

    function spawnWave() {
      state.wave += 1;
      const mission = missions[state.wave - 1] || 'Hold the line until the train is ready!';
      setMissionText(mission);
      addLog(`MISSION ${state.wave}: ${mission}`);
      const count = Math.min(4 + state.wave * 2, 18);
      for (let i = 0; i < count; i++) {
        const edge = Math.floor(Math.random() * 4);
        let x, y;
        const padding = 30;
        if (edge === 0) { x = padding; y = Math.random() * canvas.height; }
        if (edge === 1) { x = canvas.width - padding; y = Math.random() * canvas.height; }
        if (edge === 2) { x = Math.random() * canvas.width; y = padding; }
        if (edge === 3) { x = Math.random() * canvas.width; y = canvas.height - padding; }
        state.enemies.push({
          x,
          y,
          radius: 14 + Math.random() * 6,
          speed: 0.7 + state.wave * 0.12,
          cooldown: 0,
          hp: 2 + Math.floor(state.wave / 2)
        });
      }
      state.intermission = false;
      statusBanner.innerHTML = '';
    }

    function resetGame() {
      player.x = canvas.width / 2;
      player.y = canvas.height / 2;
      player.health = 100;
      player.vx = 0;
      player.vy = 0;
      state.wave = 0;
      state.score = 0;
      state.ammo = state.maxAmmo;
      state.status = 'playing';
      state.enemies = [];
      state.bullets = [];
      state.particles = [];
      state.intermission = false;
      endCard.style.display = 'none';
      addLog('New campaign initiated.');
      spawnWave();
      updateHUD();
    }

    function reload() {
      if (state.reloading || state.ammo === state.maxAmmo) return;
      state.reloading = true;
      addLog('Reloading cylinder...');
      setTimeout(() => {
        state.ammo = state.maxAmmo;
        state.reloading = false;
        addLog('Cylinder locked. Ready.');
        updateHUD();
      }, 900);
    }

    function shoot() {
      const now = performance.now();
      if (state.reloading || state.status !== 'playing') return;
      if (now - state.lastShot < 180) return;
      if (state.ammo <= 0) {
        addLog('Out of rounds! Press R to reload.');
        return;
      }
      state.lastShot = now;
      state.ammo -= 1;
      const angle = Math.atan2(state.aim.y - player.y, state.aim.x - player.x);
      state.bullets.push({
        x: player.x + Math.cos(angle) * player.radius,
        y: player.y + Math.sin(angle) * player.radius,
        dx: Math.cos(angle) * 8,
        dy: Math.sin(angle) * 8,
        life: 80
      });
      state.particles.push({
        x: player.x + Math.cos(angle) * player.radius,
        y: player.y + Math.sin(angle) * player.radius,
        life: 20,
        size: 6,
        color: 'rgba(255, 200, 120, 0.7)'
      });
      updateHUD();
    }

    const keys = state.keys;

    window.addEventListener('keydown', (e) => {
      const key = e.key.toLowerCase();
      keys[key] = true;
      if (key === ' ') {
        e.preventDefault();
        shoot();
      }
      if (key === 'r') reload();
    });

    window.addEventListener('keyup', (e) => {
      keys[e.key.toLowerCase()] = false;
    });

    canvas.addEventListener('mousemove', (e) => {
      const rect = canvas.getBoundingClientRect();
      state.aim.x = ((e.clientX - rect.left) / rect.width) * canvas.width;
      state.aim.y = ((e.clientY - rect.top) / rect.height) * canvas.height;
      player.angle = Math.atan2(state.aim.y - player.y, state.aim.x - player.x);
    });

    canvas.addEventListener('mousedown', () => shoot());

    restartBtn.addEventListener('click', () => {
      resetGame();
    });

    function update(delta) {
      if (state.status !== 'playing') return;

      let moveX = 0;
      let moveY = 0;
      if (keys['w'] || keys['arrowup']) moveY -= 1;
      if (keys['s'] || keys['arrowdown']) moveY += 1;
      if (keys['a'] || keys['arrowleft']) moveX -= 1;
      if (keys['d'] || keys['arrowright']) moveX += 1;
      const magnitude = Math.hypot(moveX, moveY);
      const speedBoost = keys['shift'] ? player.sprintBoost : 1;
      if (magnitude) {
        player.vx += (moveX / magnitude) * player.speed * speedBoost;
        player.vy += (moveY / magnitude) * player.speed * speedBoost;
      }
      player.vx *= player.friction;
      player.vy *= player.friction;
      player.x += player.vx * (delta / 16.6);
      player.y += player.vy * (delta / 16.6);
      player.x = Math.max(player.radius, Math.min(canvas.width - player.radius, player.x));
      player.y = Math.max(player.radius, Math.min(canvas.height - player.radius, player.y));

      state.bullets.forEach((b, i) => {
        b.x += b.dx * (delta / 16.6);
        b.y += b.dy * (delta / 16.6);
        b.life -= 1;
        if (b.x < 0 || b.x > canvas.width || b.y < 0 || b.y > canvas.height || b.life <= 0) {
          state.bullets.splice(i, 1);
        }
      });

      state.enemies.forEach((enemy, index) => {
        const angle = Math.atan2(player.y - enemy.y, player.x - enemy.x);
        enemy.x += Math.cos(angle) * enemy.speed * (delta / 16.6);
        enemy.y += Math.sin(angle) * enemy.speed * (delta / 16.6);
        const dist = Math.hypot(player.x - enemy.x, player.y - enemy.y);
        if (dist < player.radius + enemy.radius) {
          player.health -= 0.25 * (delta / 16.6);
          state.particles.push({ x: player.x, y: player.y, life: 10, size: 8, color: 'rgba(255,80,50,0.4)' });
          if (player.health <= 0) {
            player.health = 0;
            updateHUD();
            endMission('DEFEAT', 'The posse was overrun. Retreat and regroup.');
          }
        }
      });

      for (let i = state.enemies.length - 1; i >= 0; i--) {
        const enemy = state.enemies[i];
        for (let j = state.bullets.length - 1; j >= 0; j--) {
          const bullet = state.bullets[j];
          const dist = Math.hypot(enemy.x - bullet.x, enemy.y - bullet.y);
          if (dist < enemy.radius) {
            enemy.hp -= 1;
            state.bullets.splice(j, 1);
            state.particles.push({
              x: enemy.x,
              y: enemy.y,
              life: 25,
              size: 10,
              color: 'rgba(255,197,143,0.5)'
            });
            if (enemy.hp <= 0) {
              state.enemies.splice(i, 1);
              state.score += 25 + state.wave * 5;
              updateHUD();
              addLog('Bandit neutralized.');
            }
            break;
          }
        }
      }

      if (!state.intermission && state.enemies.length === 0) {
        state.intermission = true;
        state.nextWaveTimer = 3;
        statusBanner.innerHTML = '<span class="pulse">Regrouping... next wave in 3</span>';
        const countdown = setInterval(() => {
          state.nextWaveTimer -= 1;
          if (state.nextWaveTimer <= 0) {
            clearInterval(countdown);
            spawnWave();
          } else {
            statusBanner.innerHTML = `<span class="pulse">Regrouping... next wave in ${state.nextWaveTimer}</span>`;
          }
        }, 1000);
      }

      state.particles.forEach((p, i) => {
        p.life -= 1;
        p.size *= 0.96;
        if (p.life <= 0) state.particles.splice(i, 1);
      });

      updateHUD();
    }

    function endMission(title, message) {
      state.status = 'ended';
      statusBanner.innerHTML = `<span>${title}</span>`;
      endTitle.textContent = title;
      endMessage.textContent = message;
      endStats.textContent = `Honor: ${state.score} | Waves cleared: ${state.wave}`;
      endCard.style.display = 'block';
      addLog(message);
    }

    function drawBackground() {
      const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
      gradient.addColorStop(0, '#2b150f');
      gradient.addColorStop(0.6, '#110706');
      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, canvas.width, canvas.height);

      ctx.fillStyle = 'rgba(255,255,255,0.04)';
      for (let i = 0; i < 60; i++) {
        const x = Math.random() * canvas.width;
        const y = Math.random() * canvas.height * 0.4;
        ctx.fillRect(x, y, 1, 1);
      }

      ctx.fillStyle = '#1a0c0b';
      ctx.beginPath();
      ctx.moveTo(0, canvas.height * 0.45);
      ctx.quadraticCurveTo(canvas.width * 0.25, canvas.height * 0.35, canvas.width * 0.5, canvas.height * 0.47);
      ctx.quadraticCurveTo(canvas.width * 0.75, canvas.height * 0.56, canvas.width, canvas.height * 0.4);
      ctx.lineTo(canvas.width, canvas.height * 0.7);
      ctx.lineTo(0, canvas.height * 0.7);
      ctx.closePath();
      ctx.fill();

      ctx.fillStyle = '#0c0605';
      ctx.fillRect(0, canvas.height * 0.7, canvas.width, canvas.height * 0.3);
    }

    function drawPlayer() {
      ctx.save();
      ctx.translate(player.x, player.y);
      ctx.rotate(player.angle);
      ctx.fillStyle = '#f7c08a';
      ctx.beginPath();
      ctx.arc(0, 0, player.radius, 0, Math.PI * 2);
      ctx.fill();
      ctx.fillStyle = '#2d1c15';
      ctx.fillRect(0, -4, player.radius + 8, 8);
      ctx.restore();

      ctx.strokeStyle = 'rgba(255,255,255,0.5)';
      ctx.beginPath();
      ctx.arc(state.aim.x, state.aim.y, 12, 0, Math.PI * 2);
      ctx.stroke();
      ctx.beginPath();
      ctx.moveTo(state.aim.x - 6, state.aim.y);
      ctx.lineTo(state.aim.x + 6, state.aim.y);
      ctx.moveTo(state.aim.x, state.aim.y - 6);
      ctx.lineTo(state.aim.x, state.aim.y + 6);
      ctx.stroke();
    }

    function drawBullets() {
      ctx.fillStyle = '#ffd29c';
      state.bullets.forEach((bullet) => {
        ctx.beginPath();
        ctx.arc(bullet.x, bullet.y, 4, 0, Math.PI * 2);
        ctx.fill();
      });
    }

    function drawEnemies() {
      state.enemies.forEach((enemy) => {
        ctx.fillStyle = 'rgba(180, 60, 40, 0.95)';
        ctx.beginPath();
        ctx.arc(enemy.x, enemy.y, enemy.radius, 0, Math.PI * 2);
        ctx.fill();
        ctx.fillStyle = 'rgba(0,0,0,0.5)';
        ctx.fillRect(enemy.x - enemy.radius, enemy.y - enemy.radius - 8, enemy.radius * 2, 4);
      });
    }

    function drawParticles() {
      state.particles.forEach((p) => {
        ctx.fillStyle = p.color;
        ctx.beginPath();
        ctx.arc(p.x, p.y, Math.max(1, p.size), 0, Math.PI * 2);
        ctx.fill();
      });
    }

    let lastTime = performance.now();

    function loop(time) {
      const delta = time - lastTime;
      lastTime = time;
      drawBackground();
      update(delta);
      drawEnemies();
      drawBullets();
      drawPlayer();
      drawParticles();
      requestAnimationFrame(loop);
    }

    addLog('Initializing Secure Centrix81 sandbox...');
    resetGame();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
